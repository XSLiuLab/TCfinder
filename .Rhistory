getwd()
usethis::use_agpl3_license("chenxuwu")
usethis::use_mit_license("chenxuwu")
usethis::use_roxygen_md()
usethis::use_testthat()
load("./data/GSE673_diff_path213.rds")
Diff_path <- readRDS("./data/Diff_path.rds")
pathway_score <- function(normalized_matrix){
Diff_path <- readRDS("data/Diff_path.rds")
KEGG_gene <- readRDS("data/KEGG_pathway_gene.rds")
score_gene <- KEGG_gene %>% filter(hsa %in% Diff_pathway$hsa)
gene_id <- rownames(normalized_matrix)
normalized_matrix <- as.data.frame(t(normalized_matrix))
colnames(normalized_matrix) <- gene_id
myFun1 <- function(number){
sum(number)/length(number)
}
all_pathway_score <- NA
for (i in 1:213) {
gene <- score_gene %>% filter(hsa == names(table(score_gene$hsa))[i])
data1 <- normalized_matrix %>% select(gene$gene_id[which(gene$gene_id %in% colnames(normalized_matrix)==TRUE)])
path_score <- as.data.frame(apply(data1, 1, myFun1))
colnames(path_score) <- names(table(score_gene$hsa))[i]
all_pathway_score <- cbind(all_pathway_score,path_score)
}
pathway_score <- all_pathway_score[,-1]
return(pathway_score)
}
file.edit("DESCRIPTION")
devtools::document()
devtools::document()
pwd
getwd()
?pathway_score
usethis::use_vignette("interpretation")
devtools::check()
devtools::check()
usethis::use_testthat()
usethis::use_test()
pwd
getwd()
library(testthat)
library(TCfinder)
evtools::test()
devtools::test()
load_all()
devtools::load_all()
devtools::check()
devtools::check()
devtools::test()
devtools::test()
devtools::load_all()
devtools::check()
pathway_score <- function(normalized_matrix){
Diff_path <- readRDS("data/Diff_path.rds")
KEGG_gene <- readRDS("data/KEGG_pathway_gene.rds")
score_gene <- KEGG_gene %>% filter(hsa %in% Diff_pathway$hsa)
gene_id <- rownames(normalized_matrix)
normalized_matrix <- as.data.frame(t(normalized_matrix))
colnames(normalized_matrix) <- gene_id
myFun1 <- function(number){
sum(number)/length(number)
}
all_pathway_score <- NA
for (i in 1:213) {
gene <- score_gene %>% filter(hsa == names(table(score_gene$hsa))[i])
data1 <- normalized_matrix %>% select(gene$gene_id[which(gene$gene_id %in% colnames(normalized_matrix)==TRUE)])
path_score <- as.data.frame(apply(data1, 1, myFun1))
colnames(path_score) <- names(table(score_gene$hsa))[i]
all_pathway_score <- cbind(all_pathway_score,path_score)
}
pathway_score <- all_pathway_score[,-1]
return(pathway_score)
}
data_normalized <- function(expr_data){
gene_id <- rownames(expr_data)
data1 <- expr_data %>% apply(2,function(x){x/sum(x) * 10000}) %>% as.data.frame()
data2 <- data1 %>% dplyr::mutate_all(funs(log2(.+1)))
rownames(data2) <- gene_id
data2 <- round(data2,3)
return(data2)
}
devtools::check()
devtools::check()
View(pathway_score)
("data/Diff_path.rds")
("data/Diff_path.rds")
Diff_path <- readRDS("data/Diff_path.rds")
KEGG_gene <- readRDS("data/KEGG_pathway_gene.rds")
pathway_score <- function(normalized_matrix){
Diff_path <- readRDS("data/Diff_path.rds")
KEGG_gene <- readRDS("data/KEGG_pathway_gene.rds")
score_gene <- KEGG_gene %>% filter(hsa %in% Diff_pathway$hsa)
gene_id <- rownames(normalized_matrix)
normalized_matrix <- as.data.frame(t(normalized_matrix))
colnames(normalized_matrix) <- gene_id
myFun1 <- function(number){
sum(number)/length(number)
}
all_pathway_score <- NA
for (i in 1:213) {
gene <- score_gene %>% filter(hsa == names(table(score_gene$hsa))[i])
data1 <- normalized_matrix %>% select(gene$gene_id[which(gene$gene_id %in% colnames(normalized_matrix)==TRUE)])
path_score <- as.data.frame(apply(data1, 1, myFun1))
colnames(path_score) <- names(table(score_gene$hsa))[i]
all_pathway_score <- cbind(all_pathway_score,path_score)
}
pathway_score <- all_pathway_score[,-1]
return(pathway_score)
}
usethis::use_test()
usethis::use_test()
devtools::check()
library(TCfinder)
devtools::check()
devtools::check()
devtools::check()
